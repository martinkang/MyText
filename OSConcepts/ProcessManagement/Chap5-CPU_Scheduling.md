# CPU 스케줄링
* 운영체제는 CPU 스케줄링을 통해 CPU 를 프로세스 간에 교환함으로써 컴퓨터를 보다 생산적으로 만든다.

## 5.1 기본개념
* 다중 프로그래밍의 목적은 CPU 이용률을 최대화하기 위해 항상 실행 중인 프로세스를 가지게 하는 데 있다.
	- 어떤 프로세스가 대기하게 되면 ( I/O 요청등에 의해 ), 
	운영체제는 CPU 를 그 프로세스로부터 회수해 다른 프로세스에 할당한다.
	- 거의 모든 컴퓨터 자원은 사용되기 전에 스케줄 된다.

### 5.1.1 CPU-입출력 버스트 사이클 ( CPU-I/O Burst Cycle )
* 프로세스의 실행은 CPU 실행과 입출력 대기의 사이클로 구성된다. 프로세스들은 이들 두 상태 사이를 교대로 왔다 갔다 한다.
	- CPU Burst
		- CPU 가 실행되는 시간
	- I/O Burst
		- 입출력을 대기하는 시간

##### CPU 와 입출력 버스트의 교차
![5.1](http://www.cs.odu.edu/~cs471w/spring11/lectures/Scheduling_files/image002.jpg)
-출처 http://www.cs.odu.edu/~cs471w/spring11/lectures/Scheduling.htm


### 5.1.2 CPU 스케줄러
* CPU 가 유휴 상태가 될 때마다 운영체제는 준비완료 큐에 있는 프로세스들 중에서 실행될 프로세스를 선택해야 한다.
	- 선택 절차는 단기 스케줄러에 의해 실행된다.
	- 스케줄러는 실행 준비가 되어 있는 메모리 내의 프로세스들 중에서 선택하여 이들 중 하나에게 CPU 를 할당.
	- 스케줄러에 있는 레코드들은 일반적으로 프레스스들의 PCB 이다.


### 5.1.3 선점 스케줄링 ( Preemptive Scheduling )
* CPU 스케줄링은 다음의 네 가지 상황 하에서 발생할 수 있다.
	1. 한 프로세스가 실행 상태에서 대기  상태로 전환될 때 ( 입출력 호출이나 자식 process 를 wait 할 때 )
	2. 프로세스가 실행 상태에서 준비 완료 상태로 전황될 때 ( 인터럽트가 발생 )
	3. 프로세스가 대기 상태에서 준비완료 상태로 전환될 때 ( 입출력 종료 시 )
	4. 프로세스가 종료할 때
* 1 과 4 는 선택의 여지가 없이 준비완료 큐에 있는 새로운 프로세스를 반드시 선택해야 한다.
	- 비선점 방식 / 협조적 이라고 한다.
#### 용어
* 선점 스케줄링 ( Preemptive )
	- 한 프로세스가 CPU 를 점유했을 때, 또 다른 프로세스가 이 CPU 를 강제로 가져와서 점유할 수 있도록 하는 방식
	- 공유 자료에 접근했을 때 문제를 야기시킬 수 있다.
		- 한 프로세스가 자료를 변경하는 동안 선점되어 두 번째 프로세스가 실행 가능하게 되었다. 
	이 때 이 프로세스가 첫 번째 프로세스가 수정하던 비일관적인 상태에 있는 자료를 읽으려 할 수 있다.
		- 따라서 이런 접근을 조정할 방법이 필요하며 비용이 발생한다.
* 비선점 스케줄링 ( Non-Preemptive )
	- CPU 가 한 프로세스에 할당되면, 프로세스가 종료하든지 대기 상태로 전환해 CPU 방출 할때까지 CPU 를 점유하는 방식.
	- 프로세스간 오버헤드가 적지만, 대화식 시분할 시스템에 적합하지 않다.
	- 하나의 긴 작업을 모든 프로세스가 계속 기다릴 수 있다.
	- Timer 와 같은 특수 하드웨어를 요구하지 않기 때문에 특정 기종에서 채택될 수 있다.


### 5.1.4 디스패처 ( Dispatcher )
* CPU 의 제어를 단기 스케줄러가 선택한 프로세스에게 주는 모듈
	* 하는 일
		- Context Switching
		- 사용자 모드로 전환하는 일
		- 프로그램을 다시 시작하기 위해 사용자 프로그램의 적절한 위치로 이동 하는 일
* 디스패처는 모든 프로세스의 문맥 교환 ( Context Switching ) 시에 호출되므로, 가능한 한 빨라야 한다.

#### 용어
* 디스패치 지연 ( dispatch latency )
	- 디스패처가 하나의 프로세스를 중단시키고 다른 프로세스를 실행시키는 데까지 소요되는 시간


## 5.2 스케줄링 기준
* 서로 다른 CPU 스케줄링 알고리즘은 다른 특성을 가지고 있다.
	- 특정 상황에서 어떤 알고리즘을 선택하려면, 다양한 알고리즘들의 서로 다른 특성을 반드시 고려해야 한다.
* CPU 스케줄링 알고리즘을 비교하기 위해 사용되는 기준
	- CPU 이용률 ( utilization )
	- 처리량 ( throughput )
		- 단위 시간당 완료된 프로세스의 개수
	- 총처리 시간 ( turnaround time )
		- 프로세스의 제출 시간과 완료 시간의 간격
	- 대기 시간 ( waiting time )
	- 응답 시간 ( response time )


## 5.3 스케줄링 알고리즘

## 5.4 스레드 스케줄링

## 5.5 다중 처리기 스케줄링
