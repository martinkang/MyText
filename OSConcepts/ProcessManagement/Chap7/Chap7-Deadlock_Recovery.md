# 교착상태로부터 회복
* 탐지 알고리즘에 의해 교착상태가 존재한다고 결정되면, 여러 대안의 처리방법이 있다.
	- 교착상태가 발생한 것을 운영자에게 통지해 운영자가 수작업으로 처리.
	- 시스템이 자동적으로 교착상태로부터 회복
* 교착상태를 깨뜨리는 방법
	- 순환 대기를 깨뜨리기 위해 단순히 한 개 이상의 프로세스를 중지 ( abort )
	- 교착상태에 있는 하나 이상의 프로세스들로부터 자원을 선점 ( preempt )


## 프로세스 종료
* 프로세스를 중지 시킴으로써 교착상태를 제거
	* 교착상태 프로세스를 모두 중지
		- 확실하게 교착상태의 사이클을 깨뜨린다.
		- 비용이 크다.
			- 중지되는 프로세스들이 오랫동안 연산했을 가능성이 있으며, 이들 부분 계산의 결과들을
			반드시 폐기하고, 다시 계산 해야할 수도 있기 때문
	* 교착상태가 제거될 대까지 한 프로세스 씩 중지
		- 각 프로세스가 중지될 때마다 교착상태 탐지 알고리즘을 호출하여 아직도 교착상태에 있는지 확인
			- 상당한 오버헤드 유발
* 프로세스 중지 ( abort ) 시  만약 프로세스가 파일을 갱신하는 도중이였다면, 
	그 중간에 종료시킬 경우 그 파일은 부정확한 상태가 된다.
	- 중지시 올바른 상태로 되돌려야 한다.
* 부분 종료 방식 사용시, 교착상태인 프로세스들의 집합 중에서 교찯 상태를 깨뜨리기 위해
어느 프로세스를 중지해야 할지 반드시 결정해야 한다.
	- 이 결정은 CPU 스케줄링 문제와 유사한 정책 결정의 문제
		- 프로세스가 중지시켰을 대 유발되는 비용이 최소인 프로세스들을 중지해야 한다.
	- 프로세스 중지시 프로세스 선택 요인
		- 프로세스의 우선순위가 무엇인지.
	- 지금까지 프로세스가 실행된 시간과 지정된 일을 종료하는 데 더 필요한 시간
	- 프로세스가 사용한 자원의 타입과 수 ( 예를 들어, 자원들을 선점하기가 단순한지 여부 )
	- 프로세스가 종료하기 위해 더 필요한 자원의 수
	- 얼마나 많은 수의 프로세스가 종료되어야 하는지
	- 프로세스가 대화형 인지 일괄형 인지 여부


## 자원 선점
* 자원 선점을 이용해 교착상태를 제거하려면, 교착상태가 깨어질 대까지 프로세스로부터
자원을 계속적으로 선점해 이들을 다른 프로세스에게 주어야 한다.
* 자원 선점시 고려 사항
	- 희생자 선택
		- 어느 자원과 어느 프로세스들이 선점되어야 할 것인가?
		- 프로세스 종료에서와 같이 비용을 최소화 하기 위해 선점의 순서를 결정해야 한다.
		- 비용 요인
			- 교착상태 프로세스가 점유하고 있는 자원의 수
			- 교착상태 프로세스가 지금까지 실행하는 데 소요한 시간
	- 롤백
		- 프로세스로부터 자원을 선점하면, 그 프로세스는 계속 정상적으로 실행 불가능하다.
			- 필요한 자원이 부족하기 때문
		- 따라서 이 프로세스를 안전항 상태로 롤백하고, 그 상태로부터 다시 시작해야 한다.
		- 일반적으로 안전 상태가 어떤 것인지 결정하기 어렵기 때문에 가장 단순한 해결안은 완전히 롤백
			- 프로세스를 중지시키고 다시 시작
		- 프로세스를 단지 교착상태를 깨뜨릴 수 있을 정도로 롤백할 수 있다면 효과적
			- 이 방식은 보다 많은 시스템 정보를 요함
	- 기아 상태
		- 기아 상태가 발생하지 않음을 보장해야 한다.
			- 희생자러 손턱된 프로세스는 주로 비용 요인에 근거하기 때문에, 동일한 프로세스가
			항상 희생자로 선택될 수 있다.
				- 그 결과 기아 상태가 발생
		- 프로세스가 단지 한정된 시간 동안만 희생자로 선정된다는 것을 보장해야 한다.
			- 일반적인 해결책은 비용요소에 롤백의 횟수를 포함.
